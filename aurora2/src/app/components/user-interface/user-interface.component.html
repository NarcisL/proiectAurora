<div class="user-interface-container p-card p-p-4">
  <div *ngIf="!isLoggedIn" class="login-box">
    <h2 style="margin: 0 !important" class="p-mb-3">
      <span>성행위</span> Login
    </h2>
    <form (ngSubmit)="onLogin()" #loginForm="ngForm">
      <div class="pt-3 pr-4 pl-4">
        <label class="p-mb-1"
          >Username:
          <input
            type="text"
            [(ngModel)]="username"
            name="username"
            required
            placeholder="Username"
            pInputText
          />
        </label>
      </div>
      <div class="pt-3 pr-4 pl-4 pb-2">
        <label class="p-mb-1"
          >Password:
          <input
            type="password"
            [(ngModel)]="password"
            name="password"
            required
            placeholder="Password"
            pInputText
          />
        </label>
      </div>
      <div class="pt-3 pr-4 pl-4 pb-4">
        <button type="submit" label="Login" class="btn">Login</button>
      </div>
    </form>
    <div *ngIf="loginError" class="p-error p-text-center p-mt-2">
      Login failed. Please check your credentials.
    </div>
  </div>

  <div *ngIf="isLoggedIn" class="user-pannel">
    <div class="user-welcome p-text-center">
      <h2 class="pt-3 p-mb-3"><span>성행위</span> {{ loggedInUsername }}</h2>
    </div>

    <div class="user-actions-main p-d-flex p-flex-column p-ai-center">
      <div class="pt-3 pr-4 pl-4 pb-2">
        <button
          pButton
          type="button"
          label="Update Profile"
          (click)="toggleUpdateForm()"
          class="p-mb-2 p-button-info p-button-sm"
        >
          Update Profile
        </button>
      </div>
      <div class="pt-3 pr-4 pl-4 pb-2">
        <button
          pButton
          type="button"
          label="Logout"
          (click)="onLogout()"
          class="p-mb-2 p-button-warning p-button-sm"
        >
          Logout
        </button>
      </div>
      <div class="pt-3 pr-4 pl-4 pb-2">
        <button
          pButton
          type="button"
          label="Donate"
          (click)="onDonate()"
          class="p-mb-2 p-button-success p-button-sm"
        >
          Donate
        </button>
      </div>
      <div class="pt-3 pr-4 pl-4 pb-2">
        <button
          pButton
          type="button"
          label="Support"
          (click)="onSupport()"
          class="p-mb-2 p-button-help p-button-sm"
        >
          Support
        </button>
      </div>
      <div class="pt-3 pr-4 pl-4 pb-4">
        <button
          pButton
          type="button"
          label="Delete Account"
          (click)="onDelete()"
          class="p-button-danger p-button-sm"
        >
          Delete Account
        </button>
      </div>
    </div>

    <div *ngIf="showUpdateEmailForm" class="update-email-form p-mt-4 p-card">
      <div class="card-header text-center">
        <h5 class="p-mb-3">Update Your Email</h5>
      </div>
      <div class="card-body">
        <div class="field pt-3 pr-4 pl-4 pb-4">
          <label for="currentEmailDisplay" class="mb-1">Current Email</label>
          <input
            id="currentEmailDisplay"
            type="text"
            pInputText
            [value]="currentEmail"
            readonly
            disabled
          />
        </div>
        <div class="field pt-3 pr-4 pl-4 pb-4">
          <label for="newEmailInput" class="mb-1">New Email</label>
          <input
            id="newEmailInput"
            type="email"
            pInputText
            [(ngModel)]="newEmail"
            placeholder="Enter new email"
          />
        </div>
      </div>
      <div class="p-card-footer p-d-flex p-jc-end">
        <div class="pt-1 pr-4 pl-4 pb-2">
          <button
            pButton
            type="button"
            label="Cancel"
            (click)="toggleUpdateForm()"
            class="p-button-text p-button-sm p-mr-2"
          >
            Cancel
          </button>
        </div>
        <div class="pt-3 pr-4 pl-4 pb-5">
          <button
            pButton
            type="button"
            label="Submit Update"
            (click)="submitEmailUpdate()"
            class="p-button-sm"
          >
            Submit
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
